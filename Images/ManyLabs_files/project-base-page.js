webpackJsonp([9],{0:function(e,t,n){"use strict";var i=n(1),r=n(190),o=n(375),a=n(2);n(168),n(406);var s=window.contextVars.node;new r.PointerDisplay("#showLinks"),window.contextVars.currentUser.isContributor||new o(".contributor-unregistered"),s.isPublic&&s.piwikSiteID&&a.trackPiwik(s.piwikHost,s.piwikSiteID),i(window).unload(function(){return"Unload"}),i(document).ready(function(){i.getJSON(s.urls.api,function(e){i("body").trigger("nodeLoad",e)})})},22:function(e,t,n){"use strict";var i=n(4),r=n(7),o=7,a=5,s=r.defclass({constructor:function(){this.pageToGet=i.observable(0),this.numberOfPages=i.observable(0),this.currentPage=i.observable(0),this.paginators=i.observableArray([])},addNewPaginators:function(){var e,t=this;if(t.paginators.removeAll(),t.numberOfPages()>1){if(t.paginators.push({style:0===t.currentPage()?"disabled":"",handler:t.previousPage.bind(t),text:"&lt;"}),t.paginators.push({style:0===t.currentPage()?"active":"",text:"1",handler:function(){t.pageToGet(0),t.pageToGet()!==t.currentPage()&&t.fetchResults()}}),t.numberOfPages()<=o)for(e=1;e<t.numberOfPages()-1;e++)t.paginators.push({style:t.currentPage()===e?"active":"",text:e+1,handler:function(){t.pageToGet(parseInt(this.text)-1),t.pageToGet()!==t.currentPage()&&t.fetchResults()}});else if(t.currentPage()<a-1){for(e=1;a>e;e++)t.paginators.push({style:t.currentPage()===e?"active":"",text:e+1,handler:function(){t.pageToGet(parseInt(this.text)-1),t.pageToGet()!==t.currentPage()&&t.fetchResults()}});t.paginators.push({style:"disabled",text:"...",handler:function(){}})}else if(t.currentPage()>t.numberOfPages()-a)for(t.paginators.push({style:"disabled",text:"...",handler:function(){}}),e=t.numberOfPages()-a;e<t.numberOfPages()-1;e++)t.paginators.push({style:t.currentPage()===e?"active":"",text:e+1,handler:function(){t.pageToGet(parseInt(this.text)-1),t.pageToGet()!==t.currentPage()&&t.fetchResults()}});else{for(t.paginators.push({style:"disabled",text:"...",handler:function(){}}),e=t.currentPage()-1;e<=t.currentPage()+1;e++)t.paginators.push({style:t.currentPage()===e?"active":"",text:e+1,handler:function(){t.pageToGet(parseInt(this.text)-1),t.pageToGet()!==t.currentPage()&&t.fetchResults()}});t.paginators.push({style:"disabled",text:"...",handler:function(){}})}t.paginators.push({style:t.currentPage()===t.numberOfPages()-1?"active":"",text:t.numberOfPages(),handler:function(){t.pageToGet(t.numberOfPages()-1),t.pageToGet()!==t.currentPage()&&t.fetchResults()}}),t.paginators.push({style:t.currentPage()===t.numberOfPages()-1?"disabled":"",handler:t.nextPage.bind(t),text:"&gt;"})}},nextPage:function(){this.pageToGet(this.currentPage()+1),this.pageToGet()<this.numberOfPages()&&this.fetchResults()},previousPage:function(){this.pageToGet(this.currentPage()-1),this.pageToGet()>=0&&this.fetchResults()},fetchResults:function(){throw new Error('Paginator subclass must define a "fetchResults" method.')}});e.exports=s},23:function(e,t,n){e.exports={"":"Uncategorized",project:"Project",hypothesis:"Hypothesis","methods and measures":"Methods and Measures",procedure:"Procedure",instrumentation:"Instrumentation",data:"Data",analysis:"Analysis",communication:"Communication",other:"Other"}},25:function(e,t,n){"use strict";function i(e,t,n){var i=this;if(i.selector=e,i.$element=o(e),i.options=o.extend({},m,n),i.$progBar=o(i.options.progBar),Array.isArray(t))f(i,t,i.options.url);else{var r=[];f(i,r,t)}}var r=n(4),o=n(1),a=n(3),s=n(22),l=n(7);n(9);var c=n(2),u=n(23);r.punches.enableAll();var d=function(e){var t=this;o.extend(t,e),t.date=new c.FormattableDate(e.date),t.wikiUrl=r.computed(function(){return t.nodeUrl+"wiki/"+encodeURIComponent(t.params.page)}),t.wikiIdUrl=r.computed(function(){return t.nodeUrl+"wiki/id/"+encodeURIComponent(t.params.page_id)}),t._asContribLink=function(e){var t=c.htmlEscape(e.fullname);return'<a class="contrib-link" href="/profile/'+e.id+'/">'+t+"</a>"},t.hasTemplate=r.computed(function(){return t.user?o("script#"+t.action).length>0:void(o("script#"+t.action+"_no_user").length>0)}),t.hasUser=r.pureComputed(function(){return Boolean(t.user&&t.user.fullname)}),t.mapUpdates=function(e,t){return"category"===e?e+" to "+u[t["new"]]:e+" to "+t},t.displayContributors=r.computed(function(){var e="";if(t.anonymous)e+='<span class="contributor-anonymous">some anonymous contributor(s)</span>';else for(var n=0;n<t.contributors.length;n++){var i=t.contributors[n];if(n===t.contributors.length-1&&t.contributors.length>2&&(e+=" and "),i.registered)e+=t._asContribLink(i);else{var r=c.htmlEscape(i.fullname);e+="<span>"+r+"</span>"}n<t.contributors.length-1&&t.contributors.length>2?e+=", ":n<t.contributors.length-1&&2===t.contributors.length&&(e+=" and ")}return e}),t.stripSlash=function(e){return e.replace(/(^\/)|(\/$)/g,"")},t.pathType=function(e){return e.match(/\/$/)?"folder":"file"}},p=l.extend(s,{constructor:function(e,t){this["super"].constructor.call(this);var n=this;n.loading=r.observable(!1),n.logs=r.observableArray(e),n.url=t,n.anonymousUserName="<em>A user</em>",n.tzname=r.pureComputed(function(){var e=n.logs();if(e.length){var t=a(e[0].date.date).format("ZZ");return t}return""})},fetchResults:function(){var e=this;return e.loading(!0),o.ajax({type:"get",url:e.url,data:{page:e.pageToGet()},cache:!1}).done(function(t){var n=h(t.logs);e.logs.removeAll();for(var i=0;i<n.length;i++)e.logs.push(n[i]);e.currentPage(t.page),e.numberOfPages(t.pages),e.addNewPaginators()}).fail(c.handleJSONError).always(function(){e.loading(!1)})}}),h=function(e){var t=o.map(e,function(e){return new d({anonymous:e.anonymous,action:e.action,date:e.date,nodeType:e.node.is_registration?"registration":e.node.node_type,nodeCategory:e.node.category,contributors:e.contributors,nodeUrl:e.node.url,userFullName:e.user.fullname,userURL:e.user.url,params:e.params,nodeTitle:e.node.title,nodeDescription:e.params.description_new,nodePath:e.node.path,user:e.user})});return t},m={progBar:"#logProgressBar"},f=function(e,t,n){e.logs=h(t),e.viewModel=new p(e.logs,n),n&&e.viewModel.fetchResults(),e.init()};i.prototype.init=function(){var e=this;e.$progBar.hide(),r.cleanNode(e.$element[0]),c.applyBindings(e.viewModel,e.selector)},e.exports=i},168:function(e,t,n){"use strict";var i=n(1),r=n(6),o=n(5),a=n(2),s=n(25),l=window.contextVars,c={};c.beforeForkNode=function(e,t){i.ajax({url:e,contentType:"application/json"}).done(function(e){r.confirm({message:a.joinPrompts(e.prompts,"<h4>Are you sure you want to fork this project?</h4>"),callback:function(e){e&&t&&t()},buttons:{confirm:{label:"Fork"}}})}).fail(a.handleJSONError)},c.forkNode=function(){c.beforeForkNode(l.node.urls.api+"fork/before/",function(){a.block(),a.postJSON(l.node.urls.api+"fork/",{}).done(function(e){window.location=e}).fail(function(e){a.unblock(),403===e.status?a.growl("Sorry:","you do not have permission to fork this project"):(a.growl("Error:","Forking failed"),o.captureMessage("Error occurred during forking"))})})},c.forkPointer=function(e){r.confirm({title:"Fork this project?",message:"Are you sure you want to fork this project?",callback:function(t){t&&(a.block(),a.postJSON(l.node.urls.api+"pointer/fork/",{pointerId:e}).done(function(){window.location.reload()}).fail(function(){a.unblock(),a.growl("Error","Could not fork link.")}))},buttons:{confirm:{label:"Fork"}}})},c.beforeTemplate=function(e,t){i.ajax({url:e,contentType:"application/json"}).success(function(e){r.confirm({message:a.joinPrompts(e.prompts,"<h4>Are you sure you want to create a new project using this project as a template?</h4><p>Any add-ons configured for this project will not be authenticated in the new project.</p>"),callback:function(e){e&&t&&t()},buttons:{confirm:{label:"Create"}}})})},c.addonFileRedirect=function(e){return window.location.href=e.params.urls.view,!1},c.useAsTemplate=function(){c.beforeTemplate("/project/new/"+l.node.id+"/beforeTemplate/",function(){a.block(),a.postJSON("/api/v1/project/new/"+l.node.id+"/",{}).done(function(e){window.location=e.url}).fail(function(e){a.unblock(),a.handleJSONError(e)})})},i(function(){i("#newComponent form").on("submit",function(e){i("#add-component-submit").attr("disabled","disabled").text("Adding"),""===i.trim(i("#title").val())?(i("#newComponent .modal-alert").text("This field is required."),i("#add-component-submit").removeAttr("disabled","disabled").text("Add"),e.preventDefault()):i(e.target).find("#title").val().length>200&&(i("#newComponent .modal-alert").text("The new component title cannot be more than 200 characters."),i("#add-component-submit").removeAttr("disabled","disabled").text("Add"),e.preventDefault())})}),c._openCloseNode=function(e){var t=i("#icon-"+e),n=i("#body-"+e);n.toggleClass("hide"),n.hasClass("hide")?(t.removeClass("fa fa-angle-up"),t.addClass("fa fa-angle-down")):(t.removeClass("fa fa-angle-down"),t.addClass("fa fa-angle-up"))},c.reorderChildren=function(e,t){a.postJSON(l.node.urls.api+"reorder_components/",{new_list:e}).fail(function(e){i(t).sortable("cancel"),a.handleJSONError(e)})},c.removePointer=function(e,t){i.ajax({type:"DELETE",url:l.node.urls.api+"pointer/",data:JSON.stringify({pointerId:e}),contentType:"application/json",dataType:"json"}).done(function(){t.remove()}).fail(a.handleJSONError)},c.openCloseNode=function(e){var t=i("#logs-"+e);t.hasClass("active")?t.removeClass("active"):(t.hasClass("served")||i.getJSON(t.attr("data-uri"),{count:3}).done(function(n){new s("#logs-"+e,n.logs),t.addClass("served")}),t.addClass("active")),c._openCloseNode(e)},i(document).ready(function(){var e="<dl><dt>Read</dt><dd>View project content and comment</dd><dt>Read + Write</dt><dd>Read privileges plus add and configure components; add and edit content</dd><dt>Administrator</dt><dd>Read and write privileges; manage contributors; delete and register project; public-private settings</dd></dl>";i(".permission-info").attr("data-content",e).popover({trigger:"hover"});var t="Only bibliographic contributors will be displayed in the Contributors list and in project citations. Non-bibliographic contributors can read and modify the project as normal.";i(".visibility-info").attr("data-content",t).popover({trigger:"hover"}),i(".remove-pointer").on("click",function(){var e=i(this);r.confirm({title:"Remove this link?",message:"Are you sure you want to remove this link? This will not remove the project this link refers to.",callback:function(t){if(t){var n=e.attr("data-id"),i=e.closest(".list-group-item");c.removePointer(n,i)}},buttons:{confirm:{label:"Remove",className:"btn-danger"}}})}),i("#citation-more").on("click",function(){var e=i("#citationStylePanel");return e.slideToggle(200,function(){e.is(":visible")&&i("#citationStyleInput").select2("open")}),!1}),i("body").on("click",".tagsinput .tag > span",function(e){window.location="/search/?q=(tags:"+i(e.target).text().toString().trim()+")"}),i(function(){var e=window.location.pathname;i(".project-nav a").each(function(){var t=i(this).attr("href");(e===t||e.indexOf("files")>-1&&t.indexOf("files")>-1||e.indexOf("wiki")>-1&&t.indexOf("wiki")>-1)&&i(this).closest("li").addClass("active")})})}),window.NodeActions=c,e.exports=c},190:function(e,t,n){"use strict";function i(e,t){var n=this;n.selector=e,n.$element=o(n.selector),n.nodeName=t,n.viewModel=new m(t),n.init()}function r(e){this.selector=e,this.$element=o(e),this.viewModel=new f(this.$element),a.applyBindings(this.viewModel,this.$element[0])}var o=n(1),a=n(4),s=n(2),l=n(22),c=n(7),u=window.contextVars.node.urls.api,d=window.contextVars.node.id,p="Search all projects",h="Search my projects",m=c.extend(l,{constructor:function(e){this["super"].constructor.call(this);var t=this;this.nodeTitle=e,this.submitEnabled=a.observable(!0),this.searchAllProjectsSubmitText=a.observable(p),this.searchMyProjectsSubmitText=a.observable(h),this.query=a.observable(),this.results=a.observableArray(),this.selection=a.observableArray(),this.errorMsg=a.observable(""),this.totalPages=a.observable(0),this.includePublic=a.observable(!0),this.searchWarningMsg=a.observable(""),this.submitWarningMsg=a.observable(""),this.loadingResults=a.observable(!1),this.foundResults=a.pureComputed(function(){return t.query()&&t.results().length}),this.noResults=a.pureComputed(function(){return t.query()&&!t.results().length})},searchAllProjects:function(){this.includePublic(!0),this.pageToGet(0),this.searchAllProjectsSubmitText("Searching..."),this.fetchResults()},searchMyProjects:function(){this.includePublic(!1),this.pageToGet(0),this.searchMyProjectsSubmitText("Searching..."),this.fetchResults()},fetchResults:function(){var e=this;e.errorMsg(""),e.searchWarningMsg(""),e.query()?(e.results([]),e.loadingResults(!0),s.postJSON("/api/v1/search/node/",{query:e.query(),nodeId:d,includePublic:e.includePublic(),page:e.pageToGet()}).done(function(t){t.nodes.length||e.errorMsg("No results found."),e.results(t.nodes),e.currentPage(t.page),e.numberOfPages(t.pages),e.addNewPaginators()}).fail(function(t){e.searchWarningMsg(t.responseJSON&&t.responseJSON.message_long)}).always(function(){e.searchAllProjectsSubmitText(p),e.searchMyProjectsSubmitText(h),e.loadingResults(!1)})):(e.results([]),e.currentPage(0),e.totalPages(0),e.searchAllProjectsSubmitText(p),e.searchMyProjectsSubmitText(h))},addTips:function(e){e.forEach(function(e){o(e).find(".contrib-button").tooltip()})},add:function(e){this.selection.push(e),o(".tooltip").hide(),o(".contrib-button").tooltip()},remove:function(e){var t=this;t.selection.splice(t.selection.indexOf(e),1),o(".tooltip").hide(),o(".contrib-button").tooltip()},addAll:function(){var e=this;o.each(e.results(),function(t,n){-1===e.selection().indexOf(n)&&e.add(n)})},removeAll:function(){var e=this;o.each(e.selection(),function(t,n){e.remove(n)})},selected:function(e){for(var t=this,n=0;n<t.selection().length;n++)if(e.id===t.selection()[n].id)return!0;return!1},submit:function(){var e=this;e.submitEnabled(!1),e.submitWarningMsg("");var t=s.mapByProperty(e.selection(),"id");s.postJSON(u+"pointer/",{nodeIds:t}).done(function(){window.location.reload()}).fail(function(t){e.submitEnabled(!0),e.submitWarningMsg(t.responseJSON&&t.responseJSON.message_long)})},clear:function(){this.query(""),this.results([]),this.selection([]),this.searchWarningMsg(""),this.submitWarningMsg("")},authorText:function(e){var t=e.firstAuthor;return e.etal&&(t+=" et al."),t}}),f=function(e){var t=this;t.links=a.observableArray([]),e.on("shown.bs.modal",function(){0===t.links().length&&o.ajax({type:"GET",url:u+"pointer/",dataType:"json"}).done(function(e){t.links(e.pointed)}).fail(function(){e.modal("hide"),s.growl("Error:","Could not get links")})})};i.prototype.init=function(){var e=this;a.applyBindings(e.viewModel,e.$element[0]),e.$element.on("hidden.bs.modal",function(){e.viewModel.clear()})},e.exports={PointerManager:i,PointerDisplay:r}},375:function(e,t,n){(function(t){"use strict";function i(e){this.selector=e,this.element=s(e),this.init()}function r(){var e=s(this).data("pk"),n=t.nodeId,i=c.urlParams().view_only;return"/api/v1/user/"+e+"/"+n+"/claim/email/"+(i?"?view_only="+i:"")}function o(e){c.growl("Email will arrive shortly",["Please check <em>",e,"</em>"].join(""),"success")}function a(){var e=s(this).data("pk");e!==u&&l.confirm({title:"Claim as "+t.contextVars.currentUser.username+"?",message:"If you claim this account, a contributor of this project will be emailed to confirm your identity.",callback:function(t){t&&c.postJSON(r(),{claimerId:u,pk:e}).done(function(e){o(e.email)}).fail(c.handleJSONError)},buttons:{confirm:{label:"Claim"}}})}var s=n(1),l=n(6),c=n(2),u=window.contextVars.currentUser.id;i.prototype={constructor:i,init:function(){var e=this;e.element.tooltip({title:"Is this you? Click to claim"}),u.length?e.element.on("click",a):e.element.editable({type:"text",value:"",ajaxOptions:{type:"post",contentType:"application/json",dataType:"json"},success:function(e){o(e.email)},error:c.handleJSONError,display:function(e,t){t&&t.fullname&&s(this).text(t.fullname)},params:function(e){return JSON.stringify(e)},title:"Claim Account",placement:"bottom",placeholder:"Enter email...",validate:function(e){var t=s.trim(e);return c.isEmail(t)?void 0:"Not a valid email."},url:r.call(this)})}},e.exports=i}).call(t,function(){return this}())},406:function(e,t,n){var i=n(1),r=n(6),o=n(2),a=function(e,t,n,i){var r=o.htmlEscape(e),a=o.htmlEscape(t);return n?"You are about to register the "+i+" <b>"+r+"</b> including all components and data within it. This will <b>not</b> register its parent, <b>"+a+'</b>. If you want to register the parent, please go <a href="'+n+'">here.</a> After clicking Register, you will next select a registration form.':"You are about to register <b>"+r+"</b> including all components and data within it. Registration creates a permanent, time-stamped, uneditable version of the project. If you would prefer to register only one particular component, please navigate to that component and then initiate registration. After clicking Register, you will next select a registration form."};i(document).ready(function(){i("#registerNode").click(function(e){var t=window.contextVars.node,n=e.currentTarget.href;e.preventDefault();var i=t.title,s=o.htmlEscape(i),l=t.parentTitle,c=t.parentRegisterUrl,u=t.category,d="Register "+s;"project"!==t.category&&(u="component"),r.confirm({title:d,message:a(i,l,c,u),callback:function(e){e&&(window.location.href=n)},buttons:{confirm:{label:"Register"}}})})})}});