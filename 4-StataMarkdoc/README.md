Stata + Markdoc One Click Workflow
===========================

This folder contains files for the Markdoc Demo. Markdoc is a tool to write dynamic documents in Stata.

CONTENTS:

1. This README
2. markdoc_html.do--example file that generates HTML output.
3. markdoc_latex.do--example file that generates LaTeX output.
4. markdoc_markdown.do--example file that generates Markdown output.


## What are Dynamic Documents?
Dynamic documents contain analysis code and output all in one document. The old way people worked is by having a bunch of analysis script files (.do files in Stata, or .R files in R), which would produce a bunch of output files (figures, graphs, tables, etc.) and a separate file for the final paper. A lot can be lost in this linking process.

## Why use them?
You can improve things by automating this process to the point where you run scripts, and then automatically include the latest output in the paper, which can be done without too much difficulty in LaTeX--for examples, see files from [this Github repo](https://github.com/BITSS/WorldBankApril2016/tree/master/3-StataLaTeX). But people are probably not even doing that, especially if they're writing in MS Word. You can include references to files in MS Word, but it's kind of a pain, so people are probably just inserting images or copying and pasting, which you have to remember to do every time you update the figures. Once you have more than one or two figures to insert and keep updating, it becomes very hard to keep track of which script files generated which output (and it is straight up impossible for reviewers or anyone other than the original author to determine this.) Dynamic documents are the solution to this problem.

Basically, dynamic documents are a file that contains interspersed bits of code and your final paper.  Code chunk1 that generates Figure 1, intro paragraph of paper that cites Figure 1, code chunk 2, paper paragraph 2, etc. (It's much easier with an example--see the other files in this repo.)

The best dynamic documents software out there is easily [R Markdown](http://rmarkdown.rstudio.com/), which works with R. You can write your entire paper in R Markdown: figures, citations, everything.

The option for Stata users is Markdoc. To install, type the following into Stata:
> ssc install markdoc

> ssc install weaver

> ssc install statax

You may also get some links about installing Pandoc and wkhtmltopdf. Please install those as well. Also run "adoupdate" if you've ever installed these before because markdoc is a work in progress. Markdoc is also available [on Github](https://github.com/haghish/MarkDoc) in case you want to contribute.

## Demo:
Markdoc is written in a Stata .do file. Markdoc takes a Stata log file generated by the .do file and turns it into output of almost any format. The engine behind formatting the output is called [Pandoc](http://pandoc.org/), which if you're interested, is a very powerful document conversion tool.

You need to write the paper portion of your dynamic document in Markdown, LaTeX, or HTML. Markdown is by far the simplest.

1. Once you install the Markdoc .ado, type "help markdoc" for the basic commands.
2. Open the markdoc_markdown.do file in Stata.
3. Get it to run on your computer. (You should only have to change the path at the top.)
4. Look at that nice output! (Open the example.md file in MarkdownPad or some other Markdown renderer.)
5. Clean up the .do so that only real output (and no code) is written in the final output.
6. Notice the txt command to output a Stata-calculated number directly to the paper.
5. Edit markdoc_markdown.do so that it renders the output as a Word document.
6. Edit markdoc_markdown.do so that it renders the output as HTML.
6. Run the markdoc_html.do file and get it to render in Markdown, Word, and HTML.
7. Run the markdoc_latex.do file and get it to render in Markdown, Word, and HTML.
8. OPTIONAL: If you have [LaTeX](https://latex-project.org/ftp.html) installed (it's a big download), pick any of the markdoc .do files and render the output as .tex. Then compile that in LaTeX to render a PDF.
9. Make your own markdoc dynamic document in Markdoc.
	1. Start with a blank .do file.
	2. Start the log file.
	3. Have a section of Stata code & output that you want in the final paper.
	2. Have Stata code that you want in the final paper (with no Stata output).
	3. Have Stata output that you want in the final paper (with no Stata code).
	4. Have Stata code and output where you want *neither* in the final paper.
	5. Write a paragraph that's just the paper.
	6. Generate a figure in Stata and include it in the paper.
	7. OPTIONAL: Run a regression, format the output with outreg2 or estout, and include it in the paper. (This is easiest with LaTeX or HTML--include/input the .tex file created by estout. Also check out the tbl command in weaver.)
	8. OPTIONAL: Include a citation. (See instructions [here](http://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html).)
